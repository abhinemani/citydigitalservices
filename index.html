<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>Sheetsee Table Demo</title>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'/>
    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>
    <script type='text/javascript' src='js/tabletop.js'></script>
    <script type='text/javascript' src='js/sheetsee.js'></script>
    <script src="js/foundation.min.js"></script>
    <script src="js/foundation/foundation.equalizer.js"></script>
    
    <link rel='stylesheet' type='text/css' href='css/foundation.css'>
    <link rel='stylesheet' type='text/css' href='css/icons/foundation-icons.css'>
    <link rel='stylesheet' type='text/css' href='http://api.tiles.mapbox.com/mapbox.js/v1.0.0/mapbox.css'  />
    <style>
      #map {max-width: 1000px; height: 350px;}
      .leaflet-popup-content li {list-style:none;}
      .leaflet-popup-content {width: 102px;}
      .leaflet-popup-content img {width: 100px;}
      a {border: none;}
      li.cta-button a.button.small {width: 60px;}
    </style>
  </head>

<body>

  <nav class="top-bar" data-topbar>
    <ul class="title-area">
      <li class="name">
        <h1><a href="#">Digital Cities Map</a></h1>
      </li>
      <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>

    <section class="top-bar-section">
      <!-- Right Nav Section -->
      <ul class="right">
        <li class="active"><a href="#">Right Button Active</a></li>
        <li class="has-dropdown">
          <a href="#">Right Button Dropdown</a>
          <ul class="dropdown">
            <li><a href="#">First link in dropdown</a></li>
          </ul>
        </li>
      </ul>

      <!-- Left Nav Section -->
      <!--<ul class="left">
        <li><a href="#">Left Nav Button</a></li>
      </ul>-->
    </section>
  </nav>  
  <div class="row">
    <div class="large-12 columns">
    	<div class="panel">
        <h3>Connect with your open city</h3>
        <p>Easily find out if your city is open, and if it is, get access to the information it's providing in one, centralized, up-to-date place.</p>
       
        <!--<div class="row">
        	<div class="large-4 medium-4 columns">
    		<p><a href="http://foundation.zurb.com/docs">The Data that Matters</a><br />Everything you need to know about using the framework.</p>
    	</div>
        	<div class="large-4 medium-4 columns">
        		<p><a href="http://github.com/zurb/foundation">Emphasis on standards</a><br />Latest code, issue reports, feature requests and more.</p>
        	</div>
        	<div class="large-4 medium-4 columns">
        		<p><a href="/add">Add your city</a><br />Ping us on Twitter if you have questions. If you build something with this we'd love to see it (and send you a totally boss sticker).</p>
        	</div>        
				</div>-->
    	</div>
    </div>
  </div>
  <div class="row">
    <div class="large-12 columns">
      <div class="container">
        <div id="map"></div>
      </div>
    </div>
  </div>
  <br />  <br />  
  <div id="photogrid"></div>
  

</div>

<script id="photogrid" type="text/html">
       <div class="row" data-equalizer>
 
         {{#rows}}     

        <div class="large-4 columns" data-equalizer-watch>
          <ul class="pricing-table">
            <a name="city{{rowNumber}}"></a><li class="title">{{city}}</li>
            <li class="price"><div class="progress large-# {{status}} round">
              <span class="meter" style="width: {{progress}}%"></span>
            </div></li>            
            <li class="cta-button">
              <a class="button small" href='{{laws}}'><i class="fi-layout size-21"></i></a>
              <a class="button small" href='{{services}}'><i class="fi-map size-21"></i></a>
              <a class="button small" href='{{data}}'><i class="fi-graph-trend size-21"></i></a>
              <a class="button small" href='{{feedback}}'><i class="fi-mobile-signal size-21"></i></a>
            </li>
           
          </ul>
     
        </div>
 
  {{/rows}}   </div>  
</script>

  <script>  $(document).foundation();
  </script>

<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
  	var URL = "1FhOYwOu1w14e_4qwKLsLoZYpd3hJu8Q3wSiZi5kwFMA"
  	Tabletop.init( { key: URL, callback: showInfo, simpleSheet: true, orderby: 'name' } )
  })
  

  function showInfo(data) {
    var html = Sheetsee.ich.photogrid({'rows': data})
    $('#photogrid').html(html)
    $('#photogrid a').each(function() {
        if($(this).attr('href') === '' || $(this).text() === 'N/A') {
            $(this).addClass("secondary");
        }
    });
       var optionsJSON = ["city", "rowNumber"]
       var template = "<ul><li><a href=#city{{rowNumber}}>{{city}}</a></li></ul>"
       var geoJSON = Sheetsee.createGeoJSON(data, optionsJSON)
       var map = Sheetsee.loadMap("map")
       Sheetsee.addTileLayer(map, 'examples.map-20v6611k')
        var markerLayer = Sheetsee.addMarkerLayer(geoJSON, map, template)
     }

  </script>

</script>

</body>
</html>
